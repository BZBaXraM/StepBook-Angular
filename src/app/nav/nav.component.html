<nav class="bg-gradient-to-r from-gray-900 to-gray-800 shadow-lg">
	<div class="container mx-auto px-4 py-3">
		<div class="flex items-center justify-between">
			<a
				class="text-3xl font-bold text-white hover:text-gray-300 transition duration-300"
				routerLinkActive="active"
				routerLink="/"
				>{{ title }}</a
			>

			<ul class="hidden md:flex space-x-6">
				@if (accountService.currentUser()) {
				<li>
					<a
						class="text-white hover:text-gray-300 transition duration-300"
						routerLink="/members"
						routerLinkActive="border-b-2 border-gray-300"
						>Friends From STEP IT</a
					>
				</li>
				<li>
					<a
						class="text-white hover:text-gray-300 transition duration-300"
						routerLink="/lists"
						routerLinkActive="border-b-2 border-gray-300"
						>Lists</a
					>
				</li>
				<li>
					<a
						class="text-white hover:text-gray-300 transition duration-300"
						routerLink="/search"
						routerLinkActive="border-b-2 border-gray-300"
						>Search</a
					>
				</li>
				<li class="relative">
					<a
						class="text-white hover:text-gray-300 transition duration-300"
						routerLink="/messages"
						routerLinkActive="border-b-2 border-gray-300"
						>Messages</a
					>
					@if (haveMessages) {
					<span
						class="absolute -top-2 -right-2 bg-red-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center"
					>
						{{ newMessagesCount }}
					</span>
					}
				</li>
				}
			</ul>

			@if (accountService.currentUser()) {
			<div class="relative" (click)="toggleDropdown()">
				<button
					class="flex items-center justify-between px-4 py-2 text-black bg-opacity-20 bg-white rounded-full hover:bg-opacity-30 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-300 transition duration-300"
					id="dropdownDefault"
				>
					<img
						class="w-8 h-8 mr-2 rounded-full border-2 border-white"
						src="{{
							accountService.currentUser()?.PhotoUrl || 'user.png'
						}}"
						alt="Main photo"
					/>
					<span class="text-sm font-semibold">
						Welcome {{ accountService.currentUser()?.KnownAs }}
					</span>
					<svg
						class="w-4 h-4 ml-2"
						aria-hidden="true"
						fill="none"
						stroke="currentColor"
						viewBox="0 0 24 24"
					>
						<path
							stroke-linecap="round"
							stroke-linejoin="round"
							stroke-width="2"
							d="M19 9l-7 7-7-7"
						/>
					</svg>
				</button>
				<div
					*ngIf="isDropdownOpen"
					class="absolute right-0 mt-2 w-48 bg-white rounded-md shadow-xl z-20"
				>
					<ul class="py-1">
						<li>
							<a
								class="block px-4 py-2 text-sm text-gray-700 hover:bg-purple-100 hover:text-purple-600 transition duration-300"
								routerLink="/member/edit"
								>Edit profile</a
							>
						</li>
						<li>
							<a
								class="block px-4 py-2 text-sm text-gray-700 hover:bg-purple-100 hover:text-purple-600 transition duration-300"
								routerLink="/account-settings"
								>Account Settings</a
							>
						</li>
						<li>
							<hr class="my-1 border-gray-200" />
						</li>
						<li>
							<a
								class="block px-4 py-2 text-sm text-red-600 hover:bg-red-100 transition duration-300"
								(click)="logout()"
								>Logout</a
							>
						</li>
					</ul>
				</div>
			</div>
			}
		</div>
	</div>
</nav>
