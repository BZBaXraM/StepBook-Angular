<div class="profile-container">
  <div class="profile-card">
    <div class="profile-header">
      <img
        [src]="member.PhotoUrl || 'user.png'"
        [alt]="member.Username"
        class="profile-image"
      />
      
      <div class="user-info">
        <h2 class="username">{{ member.Username }}</h2>
        <p class="fullname">{{ member.FirstName }} {{ member.LastName }}</p>
        
        <div class="user-meta">
          <div class="meta-item">
            <i class="fa fa-map-marker-alt"></i>
            <span>{{ member.City }}, {{ member.Country }}</span>
          </div>
          <div class="meta-item">
            <i class="fa fa-birthday-cake"></i>
            <span>{{ member.Age }} years old</span>
          </div>
          <div class="meta-item">
            <i class="fa fa-clock"></i>
            <span>Last active {{ member.LastActive | timeago }}</span>
          </div>
          <div class="meta-item">
            <i class="fa fa-calendar-alt"></i>
            <span>Joined {{ member.Created | date:'dd MMM yyyy' }}</span>
          </div>
        </div>

        @if (presenceService.onlineUsers().includes(member.Username)) {
          <div class="online-badge">
            <i class="fa fa-circle mr-2"></i>
            Online now
          </div>
        }
      </div>

      <div class="profile-actions">
        <button (click)="selectTab('Messages')" class="btn btn-primary">
          <i class="fa fa-envelope mr-2"></i> Message
        </button>
        <button (click)="openDialog()" class="btn btn-secondary">
          <i class="fa fa-flag mr-2"></i> Report
        </button>
      </div>
    </div>

    <div class="profile-details">
      <tabset class="member-tabset" #memberTabs>
        <tab heading="About" (selectTab)="onTabActivated($event)">
          <div class="space-y-6">
            <div>
              <h4 class="section-title">Description</h4>
              <p class="section-content">{{ member.Introduction }}</p>
            </div>
            <div>
              <h4 class="section-title">Looking For</h4>
              <p class="section-content">{{ member.LookingFor }}</p>
            </div>
          </div>
        </tab>
        
        <tab heading="Interests" (selectTab)="onTabActivated($event)">
          <h4 class="section-title">Interests</h4>
          <p class="section-content">{{ member.Interests }}</p>
        </tab>
        
        <tab heading="Photos" #photoTab="tab" (selectTab)="onTabActivated($event)">
          @if (photoTab.active) {
            <gallery [items]="images" class="gallery" [itemAutosize]="true" />
          }
        </tab>
        
        <tab heading="Messages" (selectTab)="onTabActivated($event)">
          <app-member-messages [username]="member.Username"></app-member-messages>
        </tab>
      </tabset>
    </div>
  </div>
</div>
