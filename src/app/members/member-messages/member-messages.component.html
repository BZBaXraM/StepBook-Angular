<div class="card">
	<div class="card-body">
		@if(messages().length === 0) {
		<p>No messages yet</p>
		} @else {
		<ul class="chat">
			@for (item of messages(); track item.Id) {
			<li>
				<div>
					<span class="chat-img float-end">
						<img
							class="rounded-circle"
							src="{{ item.SenderPhotoUrl || 'user.png' }}"
							alt="Image of message sender"
						/>
					</span>
					<div class="chat-body">
						<div class="header">
							<small class="text-muted">
								<span class="fa fa-clock-0">{{
									item.MessageSent
								}}</span>
								<span>{{ item.MessageSent | timeago }}</span>
								@if (!item.DateRead && item.SenderUsername !==
								username()) {
								<span class="text-danger">Unread</span>
								} @if (item.DateRead && item.SenderUsername !==
								username()) {
								<span class="text-success"
									>(read {{ item.DateRead | timeago }})</span
								>
								}
							</small>
						</div>
						<p>{{ item.Content }}</p>
					</div>
				</div>
			</li>
			}
		</ul>
		}
	</div>

	<div class="card-footer">
		<form #messageForm (ngSubmit)="sendMessage()">
			<div class="input-group">
				<input
					name="content"
					required
					[(ngModel)]="content"
					type="text"
					class="form-control input-sm"
					placeholder="Type a message..."
				/>
				<div class="input-group-append">
					<button
					[disabled]="!messageForm.valid"
						class="btn btn-primary"
						type="submit"
					>
						Send
					</button>
				</div>
			</div>
		</form>
	</div>
</div>
